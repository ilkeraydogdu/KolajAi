(self.webpackChunkkolajAI_frontend=self.webpackChunkkolajAI_frontend||[]).push([[933],{367:function(){const e=function(e){const t=$(e+" input"),s=$(e+" i");"password"===t.attr("type")?(t.attr("type","text"),s.removeClass("bi-eye-slash-fill").addClass("bi-eye-fill")):(t.attr("type","password"),s.removeClass("bi-eye-fill").addClass("bi-eye-slash-fill"))},t=function(e,t,s){const i=`\n      <div id="${"toast-"+Date.now()}" class="toast ${{success:"bg-success text-white",error:"bg-danger text-white",warning:"bg-warning",info:"bg-info text-white"}[e]||""}" role="alert" aria-live="assertive" aria-atomic="true">\n        <div class="toast-header">\n          <strong class="me-auto">${t}</strong>\n          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>\n        <div class="toast-body">\n          ${s}\n        </div>\n      </div>\n    `;let a=$(".toast-container");0===a.length&&(a=$('<div class="toast-container position-fixed top-0 end-0 p-3"></div>'),$("body").append(a));const n=$(i);a.append(n);new bootstrap.Toast(n[0],{autohide:!0,delay:5e3}).show(),setTimeout(function(){n.remove()},5e3)},s=function(e,t,s,i,a){$.ajax({url:e,type:t,data:s,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},crossDomain:!0,xhrFields:{withCredentials:!1},success:function(e){i&&i(e)},error:function(e,t,s){a&&a({status:e.status,statusText:e.statusText,responseText:e.responseText,error:s})}})},i={tempPasswordVerified:!1,verificationInProgress:!1,init:function(){this.tempPasswordInput=$("#inputTempPassword"),this.newPasswordSection=$("#newPasswordSection"),this.confirmPasswordSection=$("#confirmPasswordSection"),this.submitButtonSection=$("#submitButtonSection"),this.tempPasswordError=$("#tempPasswordError"),this.resetPasswordForm=$("#resetPasswordForm");$('input[name="email"]').val();window.history.replaceState&&window.history.replaceState(null,null,window.location.pathname),t("success","Kay\u0131t Ba\u015far\u0131l\u0131","Hesab\u0131n\u0131z ba\u015far\u0131yla olu\u015fturuldu. Size e-posta ile g\xf6nderilen ge\xe7ici \u015fifre ile hemen yeni bir \u015fifre belirleyebilirsiniz."),this.setupEventListeners()},setupEventListeners:function(){const s=this;this.tempPasswordInput.on("input",function(){s.verifyTempPassword($(this).val())}),$("#show_hide_temp_password a").on("click",function(t){t.preventDefault(),e("#show_hide_temp_password")}),$("#show_hide_password a").on("click",function(t){t.preventDefault(),e("#show_hide_password")}),$("#show_hide_password2 a").on("click",function(t){t.preventDefault(),e("#show_hide_password2")}),this.resetPasswordForm.on("submit",function(e){if(e.preventDefault(),!s.tempPasswordVerified)return s.tempPasswordError.text("L\xfctfen \xf6nce ge\xe7ici \u015fifreyi do\u011frulay\u0131n"),t("warning","Uyar\u0131","L\xfctfen \xf6nce ge\xe7ici \u015fifreyi do\u011frulay\u0131n"),!1;const i=$("#inputChoosePassword").val(),a=$("#inputChoosePassword2").val(),n=$('input[name="email"]').val();if(i!==a)return $("#passwordError").text("\u015eifreler e\u015fle\u015fmiyor"),$("#inputChoosePassword2").addClass("is-invalid"),t("error","Hata","\u015eifreler e\u015fle\u015fmiyor"),!1;if(i.length<6)return $("#passwordError").text("\u015eifre en az 6 karakter olmal\u0131d\u0131r"),$("#inputChoosePassword").addClass("is-invalid"),t("error","Hata","\u015eifre en az 6 karakter olmal\u0131d\u0131r"),!1;const r=$("#submitButtonSection button"),o=r.text();r.prop("disabled",!0).html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> \u0130\u015fleniyor...'),$.ajax({url:"/reset-password",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({email:n,password:i,password_confirm:a}),headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"},beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Methods","POST, OPTIONS"),e.setRequestHeader("Access-Control-Allow-Headers","Content-Type, X-Requested-With")},success:function(e){t("success","Ba\u015far\u0131l\u0131","\u015eifreniz ba\u015far\u0131yla de\u011fi\u015ftirildi"),setTimeout(function(){window.location.href="/login?messageType=success&messageTitle=Ba\u015far\u0131l\u0131&messageText=\u015eifreniz+ba\u015far\u0131yla+de\u011fi\u015ftirildi.+Yeni+\u015fifrenizle+giri\u015f+yapabilirsiniz."},2e3)},error:function(e,s,i){var a;r.prop("disabled",!1).text(o),t("error","Hata",(null===(a=e.responseJSON)||void 0===a?void 0:a.error)||"\u015eifre de\u011fi\u015ftirme i\u015flemi ba\u015far\u0131s\u0131z oldu.")}})})},verifyTempPassword:function(e){const i=this;e.length<3||this.verificationInProgress||(this.verificationInProgress=!0,s("http://localhost:8080/verify-temp-password","POST",{email:$('input[name="email"]').val(),temp_password:e},function(e){if(i.verificationInProgress=!1,e.success)i.tempPasswordVerified=!0,i.tempPasswordInput.removeClass("is-invalid").addClass("is-valid"),i.tempPasswordError.text(""),i.newPasswordSection.removeClass("d-none"),i.confirmPasswordSection.removeClass("d-none"),i.submitButtonSection.removeClass("d-none"),i.tempPasswordInput.prop("disabled",!0),t("success","Do\u011frulama Ba\u015far\u0131l\u0131","Ge\xe7ici \u015fifre do\u011fruland\u0131. L\xfctfen yeni \u015fifrenizi belirleyin.");else{i.tempPasswordVerified=!1,i.tempPasswordInput.removeClass("is-valid").addClass("is-invalid");const t=e.error||"Ge\xe7ici \u015fifre do\u011frulanamad\u0131";i.tempPasswordError.text(t)}},function(e){i.verificationInProgress=!1,i.tempPasswordVerified=!1,i.tempPasswordInput.removeClass("is-valid").addClass("is-invalid"),i.tempPasswordError.text("Ba\u011flant\u0131 hatas\u0131. L\xfctfen tekrar deneyin.")}))}},a={init:function(){this.setupEventListeners(),this.showMessageFromURL()},setupEventListeners:function(){$("#show_hide_password a").on("click",function(t){t.preventDefault(),e("#show_hide_password")}),$("#loginForm").on("submit",function(e){const s=$("#inputEmailAddress").val(),i=$("#inputChoosePassword").val();if(!s||!i)return e.preventDefault(),t("warning","Uyar\u0131","L\xfctfen t\xfcm alanlar\u0131 doldurun"),!1})},showMessageFromURL:function(){const e=new URLSearchParams(window.location.search),s=e.get("messageType"),i=e.get("messageTitle"),a=e.get("messageText");s&&a&&(t(s,i||"Bilgi",a),window.history.replaceState&&window.history.replaceState(null,null,window.location.pathname))}},n={formFields:{name:!1,email:!1,phone:!1},init:function(){this.setupEventListeners(),this.generateMathCaptcha()},setupEventListeners:function(){const e=this;$("#inputName").on("input blur",function(){const t=$(this).val().length>=5;e.formFields.name=t,e.updateFieldValidation($(this),t),e.checkAllFields()}),$("#inputEmailAddress").on("input blur",function(){const t=$(this).val(),s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);e.formFields.email=s,e.updateFieldValidation($(this),s),e.checkAllFields()}),$("#inputPhone").on("input blur",function(){const t=$(this).val(),s=/^0[0-9 ]{10,14}$/.test(t);e.formFields.phone=s,e.updateFieldValidation($(this),s),e.checkAllFields(),t.length>0&&"0"!==t.charAt(0)&&$(this).val("0"+t)}),$("#captchaAnswer").on("input blur",function(){if($("#captchaSection").is(":hidden"))return;const t=$(this).val().trim(),s=$("#captchaExpected").val().trim();if(!t)return void e.updateFieldValidation($(this),!1);const i=parseInt(t),a=parseInt(s),n=!isNaN(i)&&!isNaN(a)&&i===a;e.updateFieldValidation($(this),n),n&&$(this).data("validatedAnswer",i)}),$("#registerForm").on("submit",function(s){if(!e.checkAllFields(!0))return s.preventDefault(),t("warning","Uyar\u0131","L\xfctfen t\xfcm alanlar\u0131 do\u011fru \u015fekilde doldurun"),!1;const i=$("#captchaAnswer"),a=$("#captchaExpected");if(i.length&&a.length){const e=i.data("validatedAnswer"),n=parseInt(a.val().trim());if(!isNaN(e)&&!isNaN(n)&&e===n)return!0;const r=parseInt(i.val().trim());if(isNaN(r)||isNaN(n)||r!==n)return s.preventDefault(),i.removeClass("is-valid").addClass("is-invalid"),t("warning","Uyar\u0131","Do\u011frulama kodunu do\u011fru giriniz"),!1}}),$("#refreshCaptcha").on("click",function(){e.generateMathCaptcha()})},updateFieldValidation:function(e,t){t?e.removeClass("is-invalid").addClass("is-valid"):e.removeClass("is-valid").addClass("is-invalid")},checkAllFields:function(e=!1){const s=this.formFields.name&&this.formFields.email&&this.formFields.phone;if(s?$("#captchaSection").is(":hidden")&&($("#captchaSection").slideDown(300),this.generateMathCaptcha()):$("#captchaSection").slideUp(300),e&&!s){let e=[];this.formFields.name||e.push("Ad Soyad"),this.formFields.email||e.push("E-posta"),this.formFields.phone||e.push("Telefon"),t("warning","Eksik Bilgi","L\xfctfen \u015fu alanlar\u0131 do\u011fru \u015fekilde doldurun: "+e.join(", "))}return s},generateMathCaptcha:function(){const e=document.getElementById("captchaChallenge"),t=document.getElementById("captchaAnswer"),s=document.getElementById("captchaExpected");if(!e||!t||!s)return;const i=Math.floor(10*Math.random())+1,a=Math.floor(10*Math.random())+1;let n,r;Math.random()>.5?(n=i+a,r=`${i} + ${a} = ?`):i>=a?(n=i-a,r=`${i} - ${a} = ?`):(n=a-i,r=`${a} - ${i} = ?`),e.textContent=r,s.value=n.toString(),t.value="",t.classList.remove("is-valid","is-invalid"),$(t).removeData("validatedAnswer")}},r={init:function(){this.setupEventListeners()},setupEventListeners:function(){$("#forgotPasswordForm").on("submit",function(e){if(!$("#inputEmailAddress").val())return e.preventDefault(),t("warning","Uyar\u0131","L\xfctfen e-posta adresinizi girin"),!1})}};$(document).ready(function(){switch($("body").data("page-id")){case"login":a.init();break;case"register":n.init();break;case"forgot-password":r.init();break;case"reset-password":i.init()}})}},function(e){var t;t=367,e(e.s=t)}]);
//# sourceMappingURL=auth.af64b213.js.map