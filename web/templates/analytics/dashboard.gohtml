{{define "analytics/dashboard"}}
{{template "layout/base" .}}
{{end}}

{{define "content"}}
    <div class="analytics-container">
        <!-- Analytics Header -->
        <header class="analytics-header">
            <div class="container">
                <div class="analytics-nav">
                    <div class="analytics-logo">
                        <h2>ğŸ“Š Ä°leri DÃ¼zey Analitik</h2>
                    </div>
                    <nav class="analytics-menu">
                        <a href="/analytics/dashboard" class="active">Dashboard</a>
                        <a href="/analytics/revenue">Gelir Analizi</a>
                        <a href="/analytics/customers">MÃ¼ÅŸteri Analizi</a>
                        <a href="/analytics/products">ÃœrÃ¼n Analizi</a>
                        <a href="/admin/dashboard">Admin Panel</a>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="analytics-main">
            <div class="container">
                <div class="page-header">
                    <h1>{{.Title}}</h1>
                    <div class="page-actions">
                        <button class="btn btn-secondary" onclick="refreshAnalytics()">
                            <i class="icon-refresh"></i> Yenile
                        </button>
                        <button class="btn btn-primary" onclick="exportReport()">
                            <i class="icon-download"></i> Rapor Ä°ndir
                        </button>
                    </div>
                </div>

                <!-- Business Metrics -->
                <div class="stats-row">
                    <div class="stat-card stat-success">
                        <div class="stat-icon">ğŸ’°</div>
                        <div class="stat-info">
                            <div class="stat-number">â‚º{{.Metrics.revenue.total_revenue}}</div>
                            <div class="stat-label">Toplam Gelir</div>
                            <div class="stat-percentage">+{{.Metrics.revenue.revenue_growth}}%</div>
                        </div>
                    </div>
                    <div class="stat-card stat-primary">
                        <div class="stat-icon">ğŸ›’</div>
                        <div class="stat-info">
                            <div class="stat-number">{{.Metrics.sales.total_orders}}</div>
                            <div class="stat-label">Toplam SipariÅŸ</div>
                            <div class="stat-percentage">+{{.Metrics.sales.sales_growth}}%</div>
                        </div>
                    </div>
                    <div class="stat-card stat-info">
                        <div class="stat-icon">ğŸ‘¥</div>
                        <div class="stat-info">
                            <div class="stat-number">{{.Metrics.customers.total_customers}}</div>
                            <div class="stat-label">Toplam MÃ¼ÅŸteri</div>
                            <div class="stat-percentage">{{.Metrics.customers.retention_rate}}% tutma</div>
                        </div>
                    </div>
                    <div class="stat-card stat-warning">
                        <div class="stat-icon">ğŸ“¦</div>
                        <div class="stat-info">
                            <div class="stat-number">{{.Metrics.products.total_products}}</div>
                            <div class="stat-label">Toplam ÃœrÃ¼n</div>
                            <div class="stat-text">{{.Metrics.products.best_selling}}</div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Content Grid -->
                <div class="dashboard-grid">
                    <!-- Revenue Trend Chart -->
                    <div class="dashboard-card chart-card">
                        <div class="card-header">
                            <h3>ğŸ“ˆ Gelir Trendi</h3>
                            <div class="chart-controls">
                                <select onchange="updateRevenueTrend(this.value)">
                                    <option value="month">AylÄ±k</option>
                                    <option value="week">HaftalÄ±k</option>
                                    <option value="day">GÃ¼nlÃ¼k</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="chart-container">
                                <canvas id="revenueTrendChart" width="400" height="200"></canvas>
                            </div>
                            <div class="revenue-summary">
                                {{range .RevenueTrend}}
                                <div class="revenue-item">
                                    <span class="revenue-month">{{.month}}</span>
                                    <span class="revenue-amount">â‚º{{.revenue}}</span>
                                    <span class="revenue-orders">{{.orders}} sipariÅŸ</span>
                                </div>
                                {{end}}
                            </div>
                        </div>
                    </div>

                    <!-- Top Products -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>ğŸ† En Ä°yi ÃœrÃ¼nler</h3>
                            <a href="/analytics/products" class="view-all">TÃ¼mÃ¼nÃ¼ GÃ¶r</a>
                        </div>
                        <div class="card-content">
                            {{range .TopProducts}}
                            <div class="product-item">
                                <div class="product-rank">1</div>
                                <div class="product-info">
                                    <div class="product-name">{{.name}}</div>
                                    <div class="product-stats">
                                        <span class="product-sales">{{.sales}} satÄ±ÅŸ</span>
                                        <span class="product-revenue">â‚º{{.revenue}}</span>
                                    </div>
                                </div>
                                <div class="product-trend">ğŸ“ˆ</div>
                            </div>
                            {{end}}
                        </div>
                    </div>

                    <!-- Customer Segments -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>ğŸ¯ MÃ¼ÅŸteri Segmentleri</h3>
                            <a href="/analytics/customers" class="view-all">Detay</a>
                        </div>
                        <div class="card-content">
                            {{range .CustomerSegments}}
                            <div class="segment-item">
                                <div class="segment-info">
                                    <div class="segment-name">{{.segment}}</div>
                                    <div class="segment-stats">
                                        <span class="segment-count">{{.count}} mÃ¼ÅŸteri</span>
                                        <span class="segment-revenue">â‚º{{.revenue}}</span>
                                    </div>
                                </div>
                                <div class="segment-percentage">
                                    <div class="progress-bar" style="width: {{.percentage}}%"></div>
                                    <span class="percentage-text">{{.percentage}}%</span>
                                </div>
                            </div>
                            {{end}}
                        </div>
                    </div>

                    <!-- Business Intelligence -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>ğŸ§  Ä°ÅŸ ZekasÄ± Ã–nerileri</h3>
                        </div>
                        <div class="card-content">
                            <div class="bi-recommendations">
                                <div class="recommendation-item priority-high">
                                    <div class="recommendation-icon">ğŸš€</div>
                                    <div class="recommendation-text">
                                        <strong>Pazarlama FÄ±rsatÄ±:</strong> Premium mÃ¼ÅŸteri segmentiniz %15 bÃ¼yÃ¼dÃ¼. Ã–zel kampanya dÃ¼ÅŸÃ¼nÃ¼n.
                                    </div>
                                </div>
                                <div class="recommendation-item priority-medium">
                                    <div class="recommendation-icon">ğŸ“Š</div>
                                    <div class="recommendation-text">
                                        <strong>Stok Optimizasyonu:</strong> En Ã§ok satan Ã¼rÃ¼nlerinizin stok seviyelerini artÄ±rÄ±n.
                                    </div>
                                </div>
                                <div class="recommendation-item priority-low">
                                    <div class="recommendation-icon">ğŸ’¡</div>
                                    <div class="recommendation-text">
                                        <strong>MÃ¼ÅŸteri Deneyimi:</strong> DÃ¼ÅŸÃ¼k performanslÄ± Ã¼rÃ¼nleri gÃ¶zden geÃ§irin.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Predictive Analytics -->
                    <div class="dashboard-card chart-card">
                        <div class="card-header">
                            <h3>ğŸ”® Tahminsel Analitik</h3>
                            <div class="chart-controls">
                                <select onchange="updateForecast(this.value)">
                                    <option value="revenue">Gelir Tahmini</option>
                                    <option value="customers">MÃ¼ÅŸteri Tahmini</option>
                                    <option value="sales">SatÄ±ÅŸ Tahmini</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="forecast-summary">
                                <div class="forecast-item">
                                    <div class="forecast-label">Gelecek Ay Tahmini</div>
                                    <div class="forecast-value">â‚º135,000</div>
                                    <div class="forecast-confidence">%85 gÃ¼ven</div>
                                </div>
                                <div class="forecast-item">
                                    <div class="forecast-label">BÃ¼yÃ¼me OranÄ±</div>
                                    <div class="forecast-value">+8.2%</div>
                                    <div class="forecast-confidence">Pozitif trend</div>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="forecastChart" width="400" height="150"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>âš¡ HÄ±zlÄ± Ä°ÅŸlemler</h3>
                        </div>
                        <div class="card-content">
                            <div class="quick-actions">
                                <button class="action-btn" onclick="generateCustomReport()">
                                    <div class="action-icon">ğŸ“‹</div>
                                    <div class="action-text">Ã–zel Rapor</div>
                                </button>
                                <button class="action-btn" onclick="scheduleReport()">
                                    <div class="action-icon">ğŸ“…</div>
                                    <div class="action-text">Rapor Zamanla</div>
                                </button>
                                <button class="action-btn" onclick="exportData()">
                                    <div class="action-icon">ğŸ’¾</div>
                                    <div class="action-text">Veri Ä°ndir</div>
                                </button>
                                <button class="action-btn" onclick="shareInsights()">
                                    <div class="action-icon">ğŸ“¤</div>
                                    <div class="action-text">Ã–ngÃ¶rÃ¼ PaylaÅŸ</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

{{end}}

{{define "page_js"}}
<script>
        function refreshAnalytics() {
            location.reload();
        }

        function exportReport() {
            alert('Rapor indirme Ã¶zelliÄŸi yakÄ±nda eklenecek.');
        }

        function updateRevenueTrend(period) {
            console.log('Updating revenue trend for period:', period);
            // Chart update logic would go here
        }

        function updateForecast(type) {
            console.log('Updating forecast for type:', type);
            // Forecast update logic would go here
        }

        function generateCustomReport() {
            alert('Ã–zel rapor oluÅŸturma Ã¶zelliÄŸi yakÄ±nda eklenecek.');
        }

        function scheduleReport() {
            alert('Rapor zamanlama Ã¶zelliÄŸi yakÄ±nda eklenecek.');
        }

        function exportData() {
            alert('Veri indirme Ã¶zelliÄŸi yakÄ±nda eklenecek.');
        }

        function shareInsights() {
            alert('Ã–ngÃ¶rÃ¼ paylaÅŸma Ã¶zelliÄŸi yakÄ±nda eklenecek.');
        }

        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Analytics charts would be initialized here');
        });
</script>
{{end}}