{{define "analytics/products.gohtml"}}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - KolajAI</title>
    <link rel="stylesheet" href="/web/static/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/web/static/sass/main.css">
    <link rel="stylesheet" href="/web/static/sass/dark-theme.css">
</head>
<body>
    <div class="analytics-container">
        <!-- Header -->
        <header class="analytics-header">
            <div class="container">
                <div class="analytics-nav">
                    <div class="analytics-logo">
                        <h2>üì¶ √úr√ºn Analizi</h2>
                    </div>
                    <nav class="analytics-menu">
                        <a href="/analytics/dashboard">Dashboard</a>
                        <a href="/analytics/revenue">Gelir Analizi</a>
                        <a href="/analytics/customers">M√º≈üteri Analizi</a>
                        <a href="/analytics/products" class="active">√úr√ºn Analizi</a>
                        <a href="/admin/dashboard">Admin Panel</a>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="analytics-main">
            <div class="container">
                <div class="page-header">
                    <h1>{{.Title}}</h1>
                    <div class="page-actions">
                        <select class="form-select" onchange="filterByCategory(this.value)">
                            <option value="all">T√ºm Kategoriler</option>
                            <option value="electronics">Elektronik</option>
                            <option value="fashion">Moda</option>
                            <option value="home">Ev & Ya≈üam</option>
                            <option value="books">Kitap</option>
                        </select>
                        <button class="btn btn-primary" onclick="exportProductReport()">
                            <i class="icon-download"></i> Rapor ƒ∞ndir
                        </button>
                    </div>
                </div>

                <!-- Product Overview -->
                <div class="stats-row">
                    <div class="stat-card stat-success">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-info">
                            <div class="stat-number">{{.Products.total}}</div>
                            <div class="stat-label">Toplam √úr√ºn</div>
                            <div class="stat-percentage">+{{.Products.growth}}%</div>
                        </div>
                    </div>
                    <div class="stat-card stat-info">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-info">
                            <div class="stat-number">{{.Products.best_sellers}}</div>
                            <div class="stat-label">En √áok Satan</div>
                            <div class="stat-text">√úr√ºn sayƒ±sƒ±</div>
                        </div>
                    </div>
                    <div class="stat-card stat-warning">
                        <div class="stat-icon">üìâ</div>
                        <div class="stat-info">
                            <div class="stat-number">{{.Products.low_stock}}</div>
                            <div class="stat-label">D√º≈ü√ºk Stok</div>
                            <div class="stat-text">Dikkat gerekli</div>
                        </div>
                    </div>
                    <div class="stat-card stat-primary">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <div class="stat-number">‚Ç∫{{.Products.avg_price}}</div>
                            <div class="stat-label">Ortalama Fiyat</div>
                            <div class="stat-percentage">+{{.Products.price_growth}}%</div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Content Grid -->
                <div class="dashboard-grid">
                    <!-- Top Selling Products -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>üèÜ En √áok Satan √úr√ºnler</h3>
                            <div class="card-actions">
                                <select onchange="updateTopProducts(this.value)">
                                    <option value="sales">Satƒ±≈ü Adedi</option>
                                    <option value="revenue">Gelir</option>
                                    <option value="profit">Kar</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-content">
                            {{range .TopProducts}}
                            <div class="product-item">
                                <div class="product-rank">{{add @index 1}}</div>
                                <div class="product-image">
                                    <img src="{{.image}}" alt="{{.name}}" width="40" height="40">
                                </div>
                                <div class="product-info">
                                    <div class="product-name">{{.name}}</div>
                                    <div class="product-category">{{.category}}</div>
                                    <div class="product-stats">
                                        <span class="product-sales">{{.sales_count}} satƒ±≈ü</span>
                                        <span class="product-revenue">‚Ç∫{{.revenue}}</span>
                                    </div>
                                </div>
                                <div class="product-performance">
                                    <div class="performance-score">{{.performance_score}}%</div>
                                    <div class="performance-trend">{{if gt .trend 0}}üìà{{else if lt .trend 0}}üìâ{{else}}‚û°Ô∏è{{end}}</div>
                                </div>
                            </div>
                            {{end}}
                        </div>
                    </div>

                    <!-- Product Performance Chart -->
                    <div class="dashboard-card chart-card">
                        <div class="card-header">
                            <h3>üìä √úr√ºn Performansƒ±</h3>
                            <div class="chart-controls">
                                <select onchange="updatePerformanceChart(this.value)">
                                    <option value="month">Aylƒ±k</option>
                                    <option value="week">Haftalƒ±k</option>
                                    <option value="day">G√ºnl√ºk</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="chart-container">
                                <canvas id="productPerformanceChart" width="400" height="250"></canvas>
                            </div>
                            <div class="performance-summary">
                                <div class="summary-item">
                                    <span class="summary-label">En ƒ∞yi Performans</span>
                                    <span class="summary-value">{{.Performance.best_product}}</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Ortalama D√∂n√º≈ü√ºm</span>
                                    <span class="summary-value">{{.Performance.avg_conversion}}%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Category Analysis -->
                    <div class="dashboard-card chart-card">
                        <div class="card-header">
                            <h3>üè∑Ô∏è Kategori Analizi</h3>
                        </div>
                        <div class="card-content">
                            <div class="chart-container">
                                <canvas id="categoryChart" width="400" height="300"></canvas>
                            </div>
                            <div class="category-breakdown">
                                {{range .CategoryAnalysis}}
                                <div class="category-item">
                                    <div class="category-color" style="background-color: {{.color}}"></div>
                                    <div class="category-info">
                                        <div class="category-name">{{.name}}</div>
                                        <div class="category-stats">
                                            <span class="category-products">{{.product_count}} √ºr√ºn</span>
                                            <span class="category-revenue">‚Ç∫{{.revenue}}</span>
                                        </div>
                                    </div>
                                    <div class="category-percentage">{{.percentage}}%</div>
                                </div>
                                {{end}}
                            </div>
                        </div>
                    </div>

                    <!-- Product Lifecycle -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>üîÑ √úr√ºn Ya≈üam D√∂ng√ºs√º</h3>
                        </div>
                        <div class="card-content">
                            <div class="lifecycle-stages">
                                {{range .ProductLifecycle}}
                                <div class="lifecycle-stage">
                                    <div class="stage-icon">
                                        {{if eq .stage "introduction"}}üöÄ{{else if eq .stage "growth"}}üìà{{else if eq .stage "maturity"}}üèÜ{{else if eq .stage "decline"}}üìâ{{end}}
                                    </div>
                                    <div class="stage-info">
                                        <div class="stage-name">{{.name}}</div>
                                        <div class="stage-count">{{.product_count}} √ºr√ºn</div>
                                    </div>
                                    <div class="stage-percentage">{{.percentage}}%</div>
                                </div>
                                {{end}}
                            </div>
                            <div class="lifecycle-insights">
                                <h4>üí° Ya≈üam D√∂ng√ºs√º √ñng√∂r√ºleri</h4>
                                <ul>
                                    <li>{{.LifecycleInsights.introduction_count}} √ºr√ºn tanƒ±tƒ±m a≈üamasƒ±nda</li>
                                    <li>{{.LifecycleInsights.growth_count}} √ºr√ºn b√ºy√ºme a≈üamasƒ±nda</li>
                                    <li>{{.LifecycleInsights.decline_count}} √ºr√ºn d√º≈ü√º≈ü a≈üamasƒ±nda - yenileme gerekli</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Inventory Analysis -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>üì¶ Stok Analizi</h3>
                        </div>
                        <div class="card-content">
                            <div class="inventory-overview">
                                <div class="inventory-item">
                                    <div class="inventory-label">Toplam Stok Deƒüeri</div>
                                    <div class="inventory-value">‚Ç∫{{.Inventory.total_value}}</div>
                                </div>
                                <div class="inventory-item">
                                    <div class="inventory-label">Ortalama Stok Devir Hƒ±zƒ±</div>
                                    <div class="inventory-value">{{.Inventory.turnover_rate}} g√ºn</div>
                                </div>
                                <div class="inventory-item">
                                    <div class="inventory-label">D√º≈ü√ºk Stoklu √úr√ºnler</div>
                                    <div class="inventory-value">{{.Inventory.low_stock_count}}</div>
                                </div>
                            </div>
                            <div class="inventory-alerts">
                                <h4>‚ö†Ô∏è Stok Uyarƒ±larƒ±</h4>
                                {{range .InventoryAlerts}}
                                <div class="alert-item priority-{{.priority}}">
                                    <div class="alert-product">{{.product_name}}</div>
                                    <div class="alert-message">{{.message}}</div>
                                    <div class="alert-action">
                                        <button class="btn btn-sm btn-primary" onclick="reorderProduct('{{.product_id}}')">Sipari≈ü Ver</button>
                                    </div>
                                </div>
                                {{end}}
                            </div>
                        </div>
                    </div>

                    <!-- Price Analysis -->
                    <div class="dashboard-card chart-card">
                        <div class="card-header">
                            <h3>üí∞ Fiyat Analizi</h3>
                        </div>
                        <div class="card-content">
                            <div class="price-summary">
                                <div class="price-item">
                                    <div class="price-label">En D√º≈ü√ºk Fiyat</div>
                                    <div class="price-value">‚Ç∫{{.PriceAnalysis.min_price}}</div>
                                </div>
                                <div class="price-item">
                                    <div class="price-label">En Y√ºksek Fiyat</div>
                                    <div class="price-value">‚Ç∫{{.PriceAnalysis.max_price}}</div>
                                </div>
                                <div class="price-item">
                                    <div class="price-label">Ortalama Fiyat</div>
                                    <div class="price-value">‚Ç∫{{.PriceAnalysis.avg_price}}</div>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="priceDistributionChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Product Reviews & Ratings -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>‚≠ê Deƒüerlendirmeler</h3>
                        </div>
                        <div class="card-content">
                            <div class="rating-overview">
                                <div class="overall-rating">
                                    <div class="rating-score">{{.Reviews.overall_rating}}</div>
                                    <div class="rating-stars">
                                        {{range $i := .Reviews.star_display}}‚≠ê{{end}}
                                    </div>
                                    <div class="rating-count">{{.Reviews.total_reviews}} deƒüerlendirme</div>
                                </div>
                                <div class="rating-breakdown">
                                    {{range .Reviews.rating_breakdown}}
                                    <div class="rating-item">
                                        <span class="rating-stars">{{.stars}} ‚≠ê</span>
                                        <div class="rating-bar">
                                            <div class="rating-progress" style="width: {{.percentage}}%"></div>
                                        </div>
                                        <span class="rating-count">{{.count}}</span>
                                    </div>
                                    {{end}}
                                </div>
                            </div>
                            <div class="top-rated-products">
                                <h4>üèÜ En Y√ºksek Puanlƒ± √úr√ºnler</h4>
                                {{range .TopRatedProducts}}
                                <div class="rated-product">
                                    <div class="product-name">{{.name}}</div>
                                    <div class="product-rating">{{.rating}} ‚≠ê ({{.review_count}} deƒüerlendirme)</div>
                                </div>
                                {{end}}
                            </div>
                        </div>
                    </div>

                    <!-- Product Recommendations -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>ü§ñ AI √ñnerileri</h3>
                        </div>
                        <div class="card-content">
                            <div class="recommendations">
                                <div class="recommendation-item priority-high">
                                    <div class="recommendation-icon">üöÄ</div>
                                    <div class="recommendation-text">
                                        <strong>Fƒ±rsatlar:</strong> "Elektronik" kategorisinde %25 fiyat artƒ±≈üƒ± yapƒ±labilir. Talep y√ºksek.
                                    </div>
                                </div>
                                <div class="recommendation-item priority-medium">
                                    <div class="recommendation-icon">üì¶</div>
                                    <div class="recommendation-text">
                                        <strong>Stok Y√∂netimi:</strong> 15 √ºr√ºn√ºn stoƒüu kritik seviyede. Acil sipari≈ü verin.
                                    </div>
                                </div>
                                <div class="recommendation-item priority-low">
                                    <div class="recommendation-icon">üí°</div>
                                    <div class="recommendation-text">
                                        <strong>Yeni √úr√ºn:</strong> "Akƒ±llƒ± Ev" kategorisinde bo≈üluk var. Yeni √ºr√ºn eklemeyi d√º≈ü√ºn√ºn.
                                    </div>
                                </div>
                                <div class="recommendation-item priority-medium">
                                    <div class="recommendation-icon">üîÑ</div>
                                    <div class="recommendation-text">
                                        <strong>√áapraz Satƒ±≈ü:</strong> "Telefon Aksesuarlarƒ±" ile "Cep Telefonu" birlikte satƒ±lma oranƒ± %85.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/web/static/assets/js/jquery.min.js"></script>
    <script src="/web/static/assets/js/bootstrap.bundle.min.js"></script>
    <script>
        function filterByCategory(category) {
            console.log('Filtering by category:', category);
            window.location.href = '/analytics/products?category=' + category;
        }

        function exportProductReport() {
            alert('√úr√ºn raporu indirme √∂zelliƒüi yakƒ±nda eklenecek.');
        }

        function updateTopProducts(sortBy) {
            console.log('Updating top products sorted by:', sortBy);
        }

        function updatePerformanceChart(period) {
            console.log('Updating performance chart for period:', period);
        }

        function reorderProduct(productId) {
            alert('√úr√ºn sipari≈ü verme √∂zelliƒüi yakƒ±nda eklenecek. √úr√ºn ID: ' + productId);
        }

        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Product analytics charts would be initialized here');
        });
    </script>
</body>
</html>
{{end}}