{{define "seller/products.gohtml"}}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - KolajAI</title>
    <link rel="stylesheet" href="/web/static/sass/main.css">
    <link rel="stylesheet" href="/web/static/sass/dark-theme.css">
</head>
<body>
    <div class="seller-container">
        <!-- Seller Header -->
        <header class="seller-header">
            <div class="container">
                <div class="seller-nav">
                    <div class="seller-logo">
                        <h2>Satƒ±cƒ± Paneli</h2>
                    </div>
                    <nav class="seller-menu">
                        <a href="/seller/dashboard">Dashboard</a>
                        <a href="/seller/products" class="active">√úr√ºnlerim</a>
                        <a href="/seller/orders">Sipari≈ülerim</a>
                        <a href="/logout">√áƒ±kƒ±≈ü</a>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="seller-main">
            <div class="container">
                <div class="page-header">
                    <h1>{{.Title}}</h1>
                    <div class="page-actions">
                        <button class="btn btn-primary" onclick="showAddProductModal()">
                            <i class="icon-plus"></i> Yeni √úr√ºn Ekle
                        </button>
                    </div>
                </div>

                <!-- Products Stats -->
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-info">
                            <div class="stat-number">{{len .Products}}</div>
                            <div class="stat-label">Toplam √úr√ºn</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <div class="stat-number">{{len .Products}}</div>
                            <div class="stat-label">Aktif √úr√ºn</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è≥</div>
                        <div class="stat-info">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Bekleyen</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <div class="stat-number">{{.Vendor.Rating}}</div>
                            <div class="stat-label">Ortalama Puan</div>
                        </div>
                    </div>
                </div>

                <!-- Products Table -->
                <div class="table-container">
                    <div class="table-header">
                        <h3>√úr√ºn Listesi</h3>
                        <div class="table-filters">
                            <input type="text" placeholder="√úr√ºn ara..." class="search-input">
                            <select class="filter-select">
                                <option value="">T√ºm Durumlar</option>
                                <option value="active">Aktif</option>
                                <option value="inactive">Pasif</option>
                                <option value="pending">Bekleyen</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>√úr√ºn Adƒ±</th>
                                    <th>Fiyat</th>
                                    <th>Stok</th>
                                    <th>Durum</th>
                                    <th>Olu≈üturma Tarihi</th>
                                    <th>ƒ∞≈ülemler</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{range .Products}}
                                <tr>
                                    <td>#{{.id}}</td>
                                    <td>
                                        <div class="product-info">
                                            <div class="product-name">{{.name}}</div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="price">‚Ç∫{{.price}}</span>
                                    </td>
                                    <td>
                                        <span class="stock {{if lt .stock 10}}low-stock{{end}}">
                                            {{.stock}} adet
                                        </span>
                                    </td>
                                    <td>
                                        <span class="status status-{{.status}}">
                                            {{if eq .status "active"}}Aktif{{else if eq .status "inactive"}}Pasif{{else}}Bekleyen{{end}}
                                        </span>
                                    </td>
                                    <td>{{.created_at.Format "02.01.2006 15:04"}}</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-secondary" onclick="editProduct({{.id}})">
                                                <i class="icon-edit"></i> D√ºzenle
                                            </button>
                                            <button class="btn btn-sm btn-warning" onclick="toggleProductStatus({{.id}})">
                                                <i class="icon-toggle"></i> Durum
                                            </button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteProduct({{.id}})">
                                                <i class="icon-delete"></i> Sil
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                {{else}}
                                <tr>
                                    <td colspan="7" class="no-data">
                                        <div class="empty-state">
                                            <div class="empty-icon">üì¶</div>
                                            <h3>Hen√ºz √ºr√ºn eklenmemi≈ü</h3>
                                            <p>ƒ∞lk √ºr√ºn√ºn√ºz√º eklemek i√ßin "Yeni √úr√ºn Ekle" butonuna tƒ±klayƒ±n.</p>
                                            <button class="btn btn-primary" onclick="showAddProductModal()">
                                                √úr√ºn Ekle
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                {{end}}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="pagination-container">
                    <div class="pagination-info">
                        Toplam {{len .Products}} √ºr√ºn g√∂steriliyor
                    </div>
                    <div class="pagination">
                        <button class="btn btn-sm" disabled>¬´ √ñnceki</button>
                        <button class="btn btn-sm btn-primary">1</button>
                        <button class="btn btn-sm" disabled>Sonraki ¬ª</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Yeni √úr√ºn Ekle</h3>
                <button class="modal-close" onclick="closeModal('addProductModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addProductForm">
                    <div class="form-group">
                        <label for="productName">√úr√ºn Adƒ±</label>
                        <input type="text" id="productName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="productPrice">Fiyat (‚Ç∫)</label>
                        <input type="number" id="productPrice" name="price" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Stok Adedi</label>
                        <input type="number" id="productStock" name="stock" required>
                    </div>
                    <div class="form-group">
                        <label for="productDescription">A√ßƒ±klama</label>
                        <textarea id="productDescription" name="description" rows="4"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addProductModal')">ƒ∞ptal</button>
                <button class="btn btn-primary" onclick="saveProduct()">Kaydet</button>
            </div>
        </div>
    </div>

    <script src="/dist/js/main.js"></script>
    <script>
        function showAddProductModal() {
            document.getElementById('addProductModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function editProduct(productId) {
            alert('√úr√ºn d√ºzenleme √∂zelliƒüi yakƒ±nda eklenecek. √úr√ºn ID: ' + productId);
        }

        function toggleProductStatus(productId) {
            if (confirm('√úr√ºn durumunu deƒüi≈ütirmek istediƒüinizden emin misiniz?')) {
                fetch('/api/seller/product/status', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'product_id=' + productId + '&status=inactive'
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        location.reload();
                    } else {
                        alert('Hata: ' + data.message);
                    }
                });
            }
        }

        function deleteProduct(productId) {
            if (confirm('Bu √ºr√ºn√º silmek istediƒüinizden emin misiniz? Bu i≈ülem geri alƒ±namaz.')) {
                alert('√úr√ºn silme √∂zelliƒüi yakƒ±nda eklenecek. √úr√ºn ID: ' + productId);
            }
        }

        function saveProduct() {
            const form = document.getElementById('addProductForm');
            const formData = new FormData(form);
            
            // Mock save - in real implementation, send to server
            alert('√úr√ºn ekleme √∂zelliƒüi yakƒ±nda eklenecek.');
            closeModal('addProductModal');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modals = document.getElementsByClassName('modal');
            for (let modal of modals) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            }
        }
    </script>
</body>
</html>
{{end}}